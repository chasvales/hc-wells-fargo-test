{"version":3,"sources":["../../_source/app.js"],"names":["validationCheck","ele","rules","value","element","document","getElementById","valid","rule","split","rulename","rulevalue","console","log","parseInt","elementToMatch","re","test","classList","remove","add","showConfirmation","landingPage","confirmationPage","window","scrollTo","top","behavior","Modal","modal_element","querySelectorAll","forEach","addEventListener","event","preventDefault","removeActiveModal","dataset","modal","toggle","setTimeout","modal_showing","onclick","target","contains","onkeyup","e","keyCode","formSubmit","signupForm","elements","invalidFields","el","id","validCheck","init"],"mappings":"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","sourcesContent":["function validationCheck(ele, rules, value) {\n  var element = document.getElementById(ele);\n  var valid = true;\n  var rule = rules.split(\"|\");\n  var rulename = rule[0];\n  var rulevalue = rule[1];\n  console.log(ele, rules, value);\n\n  switch (rulename) {\n    case \"length\":\n      if (value < parseInt(rulevalue)) {\n        valid = false;\n      }\n      break;\n    case \"match\":\n      var elementToMatch = document.getElementById(rulevalue).value;\n      if (value != elementToMatch || value == \"\") {\n        valid = false;\n      }\n      break;\n    case \"validate\":\n      switch (rulevalue) {\n        case \"email\":\n          var re = /\\S+@\\S+\\.\\S+/;\n          if (!re.test(value)) {\n            valid = false;\n          }\n          break;\n      }\n      break;\n  }\n  if (valid) {\n    element.classList.remove(\"error\");\n    element.classList.add(\"valid\");\n    return \"valid\";\n  } else {\n    element.classList.add(\"error\");\n    element.classList.remove(\"valid\");\n    return \"invalid\";\n  }\n}\nfunction showConfirmation() {\n  var landingPage = document.getElementById(\"landing-page\");\n  var confirmationPage = document.getElementById(\"confirmation-page\");\n\n  landingPage.classList.add(\"hidden\");\n  confirmationPage.classList.remove(\"hidden\");\n  window.scrollTo({ top: 0, behavior: \"smooth\" });\n}\nvar Modal = function() {\n  var modal_element = document.querySelectorAll(\".trigger-modal\");\n  modal_element.forEach(function(element) {\n    element.addEventListener(\"click\", function(event) {\n      event.preventDefault();\n      removeActiveModal();\n      document\n        .getElementById(this.dataset.modal)\n        .classList.toggle(\"modal-showing\");\n\n      setTimeout(() => {\n        modal_showing = true;\n      }, 300);\n    });\n  });\n  document.onclick = function(event) {\n    if (modal_showing) {\n      if (!event.target.classList.contains(\"modal\")) {\n        removeActiveModal();\n      }\n    }\n  };\n  document.onkeyup = function(e) {\n    e = e || window.event;\n    // use e.keyCode\n    if (e.keyCode === 27) {\n      removeActiveModal();\n    }\n  };\n};\nvar removeActiveModal = function() {\n  modal_showing = false;\n  var modal = document.querySelectorAll(\".modal-showing\");\n  modal.forEach(function(element) {\n    element.classList.remove(\"modal-showing\");\n  });\n};\nfunction formSubmit() {\n  var signupForm = document.getElementById(\"bonus-offer-code\");\n  signupForm.addEventListener(\"submit\", function(event) {\n    event.preventDefault();\n    var elements = signupForm.querySelectorAll('[data-required=\"true\"]');\n    var invalidFields = false;\n\n    elements.forEach(function(element) {\n      var el = element.id;\n      var rules = element.dataset.rule;\n      var value = element.value;\n      var validCheck = validationCheck(el, rules, value);\n      if (validCheck == \"invalid\") {\n        element.classList.add(\"required\");\n        invalidFields = true;\n      }\n    });\n    if (!invalidFields) {\n      // if all required fields pass validation, move on.\n      showConfirmation();\n    }\n  });\n}\nvar init = function() {\n  Modal();\n  formSubmit();\n};\nvar modal_showing = false;\nwindow.addEventListener(\"load\", function() {\n  init();\n});\n"],"file":"app.js"}